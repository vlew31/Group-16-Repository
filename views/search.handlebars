<section>    
    <form action="/search">
    <label for="searchByName"></label>
    <input type="text" id="searchByName" name="searchByName">
    <input type="submit" value="Search">
    </form>
</section>

<section class="filters">
    <div>
        <h3>Size:</h3>
        <label><input type="text" name="size" id="size"></label>

    </div>
    <div>
    <h3>Color:</h3>
        <div><label><input type="checkbox" name="color" value="Red"> Red</label></div>
        <div><label><input type="checkbox" name="color" value="Orange"> Orange</label></div>
        <div><label><input type="checkbox" name="color" value="Yellow"> Yellow</label></div>
        <div><label><input type="checkbox" name="color" value="Green"> Green</label></div>
        <div><label><input type="checkbox" name="color" value="Blue"> Blue</label></div>
        <div><label><input type="checkbox" name="color" value="Purple"> Purple</label></div>
        <div><label><input type="checkbox" name="color" value="White"> White</label></div>
        <div><label><input type="checkbox" name="color" value="Black"> Black</label></div>
        <div><label><input type="checkbox" name="color" value="Brown"> Brown</label></div>
        <div><label><input type="checkbox" name="color" value="Other"> Other</label></div>
    </div>

    <div>
        <h3>Gender:</h3>
        <div><label><input type="checkbox" name="gender" value="Men"> Men</label></div>
        <div><label><input type="checkbox" name="gender" value="Women"> Women</label></div>
        <div><label><input type="checkbox" name="gender" value="Unisex"> Unisex</label></div>
    </div>
    <div>
        <h3>Price Range:</h3>
        <div><label><input type="checkbox" name="priceRange" value="0-50"> $0 - $50</label></div>
        <div><label><input type="checkbox" name="priceRange" value="51-100"> $51 - $100</label></div>
        <div><label><input type="checkbox" name="priceRange" value="101-200"> $101 - $200</label></div>
        <div><label><input type="checkbox" name="priceRange" value="201"> $201+ </label></div>
    </div>
    <div>
        <h3>Condition:</h3>
        <div><label><input type="checkbox" name="condition" value="New"> New</label></div>
        <div><label><input type="checkbox" name="condition" value="Refurbished"> Refurbished</label></div>
        <div><label><input type="checkbox" name="condition" value="Used"> Used</label></div>
    </div>
</section>

<section>
  <section id="search-results">
        <header>
            <h1>Search Results</h1>
        </header>
        <div id="search-results-container"></div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const searchParams = new URLSearchParams(window.location.search);
            const searchByName = searchParams.get('searchByName');

            if (searchByName) {
                fetch(`/api/search?searchByName=${searchByName}`)
                    .then(response => response.json())
                    .then(searchResults => {
                        const searchResultsContainer = document.getElementById('search-results-container');

                        if (searchResults.length === 0) {
                            searchResultsContainer.innerHTML = "<p>No results found</p>";
                            return;
                        }

                        searchResults.forEach(listing => {
                            const listingDiv = document.createElement('div');
                            listingDiv.classList.add('listing');

                            listingDiv.innerHTML = 
                                `<h2>${listing.title}</h2>
                                <p><strong>Seller: </strong>${listing.seller}</p>
                                <img src="${listing.photos[0]}" alt="${listing.title}">
                                <p><strong>Description: </strong>${listing.description}</p>
                                <p><strong>Article: </strong>${listing.article}</p>
                                <p><strong>Gender: </strong>${listing.gender}</p>              
                                <p><strong>Size: </strong>${listing.size}</p>
                                <p><strong>Color: </strong>${listing.color}</p>
                                <p><strong>Condition: </strong>${listing.condition}</p>
                                <p><strong>Price: </strong>${listing.price}</p>`;

                            searchResultsContainer.appendChild(listingDiv);
                        });
                    })
                    .catch(error => console.error('Error fetching search results:', error));
            } else {
                // If no search term is provided, display a message
                const searchResultsContainer = document.getElementById('search-results-container');
                searchResultsContainer.innerHTML = "<p>Please enter a search term.</p>";
            }
        });
    </script>
</section>

